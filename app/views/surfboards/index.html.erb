<div class="container">
  <h2 class="text-center mt-3">Find your <span class="highlight-word">perfect</span> board!</h2>
  <br>
  <div class="row rounded-pill py-3 bg-opacity-10 bg-light">
    <%= form_with url: surfboards_path, method: :get, class: "d-flex gap-3 justify-content-center" do %>
      <div class="col-3">
        <div class="border-end-2">
          <%= image_tag("location_icon.png") %><%= label :location, '   Location' %>
          <%= text_field_tag :location, params[:location], class: "form-control bg-none", placeholder: "Add location"%>
        </div>
      </div>
      <div class="col-3">
        <div>
          <%= image_tag("surfboard_icon.png", width: "20px") %><%= label :surfboard, :category, '   Board Type' %>
          <%= select(:surfboard, :category, Surfboard::CATEGORIES, { include_blank: "All types", selected: params&.dig(:surfboard,:category)}, class: "form-control")%>
        </div>
      </div>
      <div class="col-3">
        <div>
          <%= image_tag("tail1_icon.png", width: "20px") %><%= label :surfboard, :tail, '   Tail Type' %>
          <%= select(:surfboard, :tail, Surfboard::TAIL_TYPES, { include_blank: "All types", selected: params&.dig(:surfboard, :tail) }, class: "form-control") %>
        </div>
      </div>
        <div>
          <p></p>
          <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
    <br>
    <h3><span class="highlight-word align-text-center"><%= @noresults ? "Sorry, no boards match your research" : "" %></span></h3>
  </div>


  <br>
</div>

  <div class="d-flex">
    <div class="cardslist">
      <% @surfboards.each do |surfboard| %>
        <div class="card border-0 shadow-sm" style="width: 18rem;">
          <% if surfboard.photo.attached? %>
            <%= cl_image_tag surfboard.photo.key, class: "board-img" %>
          <% else  %>
            <%= image_tag "surfboard_placeholder.png", class: "board-img" %>
          <% end %>
          <div class="card-body">
          <div class="d-inline justify-content-between">
            <p class="card-title mb-0"><strong><%= surfboard.category %></strong> in <%= surfboard.location %></p>
            <p><strong><%= surfboard.price %></strong> /day</p>
          </div>
              <%= link_to "Check it now!", new_surfboard_booking_path(surfboard), class: "btn btn-secondary"%>
          </div>
        </div>
      <% end %>
    </div>
    <div style="width: 100%; height: 600px; position: sticky; top: 0; height: 100vh;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
